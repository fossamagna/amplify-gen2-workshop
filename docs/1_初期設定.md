# 初期設定

## 事前準備

本ワークショップは以下のアカウントが事前に作成されていること想定しています。

- AWS アカウント（Admin 相当）
- AWS ビルダー ID
- GitHub アカウント

## 環境構築

本ワークショップは GitHub Codespaces 上で実行されることを想定しています。

別の環境を活用されたい方は、ご自分の判断でお願いします。

## インストール

### 設定済み

AWS CLI と Node.js は devcontainer によりインストール済みです。

以下の通り確認してください。

```shell
aws --version
# aws-cli/2.32.21 Python/3.13.11 Linux/6.10.14-linuxkit exe/aarch64.debian.12

node -v
# v22.16.0
```

### Kiro CLI

本ワークショップでは、Kiro CLI を利用します。

```shell
curl -fsSL https://cli.kiro.dev/install | bash
```

`🎉 Installation complete! Happy coding!`と表示されれば OK です。

### UV

Kiro CLI から[AWS MCP サーバー](https://docs.aws.amazon.com/aws-mcp/latest/userguide/what-is-mcp-server.html)を利用します。

そのために、UV コマンドを利用可能にしておきます。

```shell
curl -LsSf https://astral.sh/uv/install.sh | sh
```

`everything's installed!`と表示されれば OK です。

## ログイン

### AWS CLI ログイン

`aws login` コマンドを利用します。

まずは AWS アカウントにサインインしてください。

ただし、`AmplifyBackendDeployFullAccess`権限ではエラーが出るので注意してください。

```shell
aws login --remote

# ログイン完了したか確認する
aws sts get-caller-identity
```

※ 注意
MFA 必須のアカウントでは aws login コマンドが利用できません。（本ワークショップにおいて）

その場合は別の方法でクレデンシャルの設定を実施してください。

https://docs.aws.amazon.com/aws-mcp/latest/userguide/getting-started-aws-mcp-server.html#mcp-set-up-process

### Kiro CLI

Kiro CLI にログインします。

```shell
kiro-cli login --use-device-flow
❯ Use with Builder ID
```

## 初期設定完了の確認

```shell
kiro-cli
> Amplify 開発ではどのようなガイド付きワークフローが利用できますか?

# mpcサーバを利用して、「Amplify開発では、以下の3つの主要なガイド付きワークフローが利用できます」と回答してくれたらOK
```
